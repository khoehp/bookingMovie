{"ast":null,"code":"import instance from \"api/instance\";\nexport const SET_MOVIES = \"booking/SET_MOVIES\";\nexport const SET_SELECTED_MOVIE = \"booking/SET_SELECTED_MOVIE\";\nexport const SET_CINEMAS = \"booking/SET_CINEMAS\";\nexport const SET_SCHEDULE = \"booking/SET_SCHEDULE\"; //async action\n\nexport const fetchMoviesAction = (config, cb) => {\n  return async dispatch => {\n    try {\n      console.log(\"call api in thunk\");\n      const res = await instance.request({\n        url: \"/api/QuanLyPhim/LayDanhSachPhimPhanTrang\",\n        method: \"GET\",\n        params: {\n          maNhom: \"GP02\",\n          soTrang: config.currentPage,\n          soPhanTuTrenTrang: config.pageSize\n        }\n      });\n      cb(res.data.content.totalCount);\n      dispatch({\n        type: SET_MOVIES,\n        payload: res.data.content\n      });\n    } catch (err) {}\n  };\n};\nexport const fetchMovieDetailAction = id => {\n  return async dispatch => {\n    try {\n      const res = await instance.request({\n        url: \"/api/QuanLyPhim/LayThongTinPhim\",\n        method: \"GET\",\n        params: {\n          MaPhim: id\n        }\n      });\n      dispatch({\n        type: SET_SELECTED_MOVIE,\n        payload: res.data.content\n      });\n    } catch (err) {}\n  };\n};\nexport const fetchCinemasAction = async dispatch => {\n  try {\n    const res = await instance.request({\n      url: \"/api/QuanLyRap/LayThongTinHeThongRap\",\n      method: \"GET\"\n    });\n    dispatch({\n      type: SET_CINEMAS,\n      payload: res.data.content\n    });\n    return res.data.content;\n  } catch (err) {}\n};\nexport const fetchMovieScheduleAction = id => {\n  return async dispatch => {\n    try {\n      const res = await instance.request({\n        url: \"/api/QuanLyRap/LayThongTinLichChieuHeThongRap\",\n        method: \"GET\",\n        params: {\n          maHeThongRap: id,\n          maNhom: \"GP02\"\n        }\n      });\n      dispatch({\n        type: SET_SCHEDULE,\n        payload: res.data.content\n      });\n    } catch (err) {}\n  };\n};","map":{"version":3,"names":["instance","SET_MOVIES","SET_SELECTED_MOVIE","SET_CINEMAS","SET_SCHEDULE","fetchMoviesAction","config","cb","dispatch","console","log","res","request","url","method","params","maNhom","soTrang","currentPage","soPhanTuTrenTrang","pageSize","data","content","totalCount","type","payload","err","fetchMovieDetailAction","id","MaPhim","fetchCinemasAction","fetchMovieScheduleAction","maHeThongRap"],"sources":["C:/Users/Administrator/Desktop/New folder/31-08-2022-10-15-45-archive/src/features/booking/action.js"],"sourcesContent":["import instance from \"api/instance\";\n\nexport const SET_MOVIES = \"booking/SET_MOVIES\";\nexport const SET_SELECTED_MOVIE = \"booking/SET_SELECTED_MOVIE\";\nexport const SET_CINEMAS = \"booking/SET_CINEMAS\";\nexport const SET_SCHEDULE = \"booking/SET_SCHEDULE\";\n\n//async action\nexport const fetchMoviesAction = (config, cb) => {\n  return async (dispatch) => {\n    try {\n      console.log(\"call api in thunk\");\n      const res = await instance.request({\n        url: \"/api/QuanLyPhim/LayDanhSachPhimPhanTrang\",\n        method: \"GET\",\n        params: {\n          maNhom: \"GP02\",\n          soTrang: config.currentPage,\n          soPhanTuTrenTrang: config.pageSize,\n        },\n      });\n      cb(res.data.content.totalCount);\n      dispatch({\n        type: SET_MOVIES,\n        payload: res.data.content,\n      });\n    } catch (err) {}\n  };\n};\n\nexport const fetchMovieDetailAction = (id) => {\n  return async (dispatch) => {\n    try {\n      const res = await instance.request({\n        url: \"/api/QuanLyPhim/LayThongTinPhim\",\n        method: \"GET\",\n        params: {\n          MaPhim: id,\n        },\n      });\n\n      dispatch({\n        type: SET_SELECTED_MOVIE,\n        payload: res.data.content,\n      });\n    } catch (err) {}\n  };\n};\n\nexport const fetchCinemasAction = async (dispatch) => {\n  try {\n    const res = await instance.request({\n      url: \"/api/QuanLyRap/LayThongTinHeThongRap\",\n      method: \"GET\",\n    });\n\n    dispatch({\n      type: SET_CINEMAS,\n      payload: res.data.content,\n    });\n    \n    return res.data.content;\n  } catch (err) {}\n};\n\nexport const fetchMovieScheduleAction = (id) => {\n  return async (dispatch) => {\n    try {\n      const res = await instance.request({\n        url: \"/api/QuanLyRap/LayThongTinLichChieuHeThongRap\",\n        method: \"GET\",\n        params: {\n          maHeThongRap: id,\n          maNhom: \"GP02\",\n        },\n      });\n\n      dispatch({\n        type: SET_SCHEDULE,\n        payload: res.data.content,\n      });\n    } catch (err) {}\n  };\n};\n"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,cAArB;AAEA,OAAO,MAAMC,UAAU,GAAG,oBAAnB;AACP,OAAO,MAAMC,kBAAkB,GAAG,4BAA3B;AACP,OAAO,MAAMC,WAAW,GAAG,qBAApB;AACP,OAAO,MAAMC,YAAY,GAAG,sBAArB,C,CAEP;;AACA,OAAO,MAAMC,iBAAiB,GAAG,CAACC,MAAD,EAASC,EAAT,KAAgB;EAC/C,OAAO,MAAOC,QAAP,IAAoB;IACzB,IAAI;MACFC,OAAO,CAACC,GAAR,CAAY,mBAAZ;MACA,MAAMC,GAAG,GAAG,MAAMX,QAAQ,CAACY,OAAT,CAAiB;QACjCC,GAAG,EAAE,0CAD4B;QAEjCC,MAAM,EAAE,KAFyB;QAGjCC,MAAM,EAAE;UACNC,MAAM,EAAE,MADF;UAENC,OAAO,EAAEX,MAAM,CAACY,WAFV;UAGNC,iBAAiB,EAAEb,MAAM,CAACc;QAHpB;MAHyB,CAAjB,CAAlB;MASAb,EAAE,CAACI,GAAG,CAACU,IAAJ,CAASC,OAAT,CAAiBC,UAAlB,CAAF;MACAf,QAAQ,CAAC;QACPgB,IAAI,EAAEvB,UADC;QAEPwB,OAAO,EAAEd,GAAG,CAACU,IAAJ,CAASC;MAFX,CAAD,CAAR;IAID,CAhBD,CAgBE,OAAOI,GAAP,EAAY,CAAE;EACjB,CAlBD;AAmBD,CApBM;AAsBP,OAAO,MAAMC,sBAAsB,GAAIC,EAAD,IAAQ;EAC5C,OAAO,MAAOpB,QAAP,IAAoB;IACzB,IAAI;MACF,MAAMG,GAAG,GAAG,MAAMX,QAAQ,CAACY,OAAT,CAAiB;QACjCC,GAAG,EAAE,iCAD4B;QAEjCC,MAAM,EAAE,KAFyB;QAGjCC,MAAM,EAAE;UACNc,MAAM,EAAED;QADF;MAHyB,CAAjB,CAAlB;MAQApB,QAAQ,CAAC;QACPgB,IAAI,EAAEtB,kBADC;QAEPuB,OAAO,EAAEd,GAAG,CAACU,IAAJ,CAASC;MAFX,CAAD,CAAR;IAID,CAbD,CAaE,OAAOI,GAAP,EAAY,CAAE;EACjB,CAfD;AAgBD,CAjBM;AAmBP,OAAO,MAAMI,kBAAkB,GAAG,MAAOtB,QAAP,IAAoB;EACpD,IAAI;IACF,MAAMG,GAAG,GAAG,MAAMX,QAAQ,CAACY,OAAT,CAAiB;MACjCC,GAAG,EAAE,sCAD4B;MAEjCC,MAAM,EAAE;IAFyB,CAAjB,CAAlB;IAKAN,QAAQ,CAAC;MACPgB,IAAI,EAAErB,WADC;MAEPsB,OAAO,EAAEd,GAAG,CAACU,IAAJ,CAASC;IAFX,CAAD,CAAR;IAKA,OAAOX,GAAG,CAACU,IAAJ,CAASC,OAAhB;EACD,CAZD,CAYE,OAAOI,GAAP,EAAY,CAAE;AACjB,CAdM;AAgBP,OAAO,MAAMK,wBAAwB,GAAIH,EAAD,IAAQ;EAC9C,OAAO,MAAOpB,QAAP,IAAoB;IACzB,IAAI;MACF,MAAMG,GAAG,GAAG,MAAMX,QAAQ,CAACY,OAAT,CAAiB;QACjCC,GAAG,EAAE,+CAD4B;QAEjCC,MAAM,EAAE,KAFyB;QAGjCC,MAAM,EAAE;UACNiB,YAAY,EAAEJ,EADR;UAENZ,MAAM,EAAE;QAFF;MAHyB,CAAjB,CAAlB;MASAR,QAAQ,CAAC;QACPgB,IAAI,EAAEpB,YADC;QAEPqB,OAAO,EAAEd,GAAG,CAACU,IAAJ,CAASC;MAFX,CAAD,CAAR;IAID,CAdD,CAcE,OAAOI,GAAP,EAAY,CAAE;EACjB,CAhBD;AAiBD,CAlBM"},"metadata":{},"sourceType":"module"}